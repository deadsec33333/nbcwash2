!function(){var t={6490:function(t,e,n){var o;!function(e){"use strict";var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return setTimeout(t,16)};function i(){var t=this;t.reads=[],t.writes=[],t.raf=r.bind(e)}function a(t){t.scheduled||(t.scheduled=!0,t.raf(c.bind(null,t)))}function c(t){var e,n=t.writes,o=t.reads;try{o.length,t.runTasks(o),n.length,t.runTasks(n)}catch(t){e=t}if(t.scheduled=!1,(o.length||n.length)&&a(t),e){if(e.message,!t.catch)throw e;t.catch(e)}}function s(t,e){var n=t.indexOf(e);return!!~n&&!!t.splice(n,1)}i.prototype={constructor:i,runTasks:function(t){for(var e;e=t.shift();)e()},measure:function(t,e){var n=e?t.bind(e):t;return this.reads.push(n),a(this),n},mutate:function(t,e){var n=e?t.bind(e):t;return this.writes.push(n),a(this),n},clear:function(t){return s(this.reads,t)||s(this.writes,t)},extend:function(t){if("object"!=typeof t)throw new Error("expected object");var e=Object.create(this);return function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(e,t),e.fastdom=this,e.initialize&&e.initialize(),e},catch:null};var u=e.fastdom=e.fastdom||new i;void 0===(o=function(){return u}.call(u,n,u,t))||(t.exports=o)}("undefined"!=typeof window?window:this)},737:function(t,e){var n,o;void 0===(o="function"==typeof(n=function(){var t,e,n="lscache-",o="-cacheexpiration",r=6e4,i=b(r),a="",c=!1;function s(){var e="__lscachetest__";if(void 0!==t)return t;try{if(!localStorage)return!1}catch(t){return!1}try{m(e,"__lscachetest__"),h(e),t=!0}catch(e){t=!(!u(e)||!localStorage.length)}return t}function u(t){return t&&("QUOTA_EXCEEDED_ERR"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||"QuotaExceededError"===t.name)}function l(){return void 0===e&&(e=null!=window.JSON),e}function d(t){return t+o}function f(){return Math.floor((new Date).getTime()/r)}function p(t){return localStorage.getItem(n+a+t)}function m(t,e){localStorage.removeItem(n+a+t),localStorage.setItem(n+a+t,e)}function h(t){localStorage.removeItem(n+a+t)}function y(t){for(var e=new RegExp("^lscache-"+(a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)")),n=localStorage.length-1;n>=0;--n){var r=localStorage.key(n);(r=(r=r&&r.match(e))&&r[1])&&r.indexOf(o)<0&&t(r,d(r))}}function w(t){var e=d(t);h(t),h(e)}function v(t){var e=d(t),n=p(e);if(n){var o=parseInt(n,10);if(f()>=o)return h(t),h(e),!0}}function g(t,e){c&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+t),e&&window.console.warn("lscache - The error was: "+e.message))}function b(t){return Math.floor(864e13/t)}return{set:function(t,e,n){if(!s())return!1;if(!l())return!1;try{e=JSON.stringify(e)}catch(t){return!1}try{m(t,e)}catch(n){if(!u(n))return g("Could not add item with key '"+t+"'",n),!1;var o,r=[];y((function(t,e){var n=p(e);n=n?parseInt(n,10):i,r.push({key:t,size:(p(t)||"").length,expiration:n})})),r.sort((function(t,e){return e.expiration-t.expiration}));for(var a=(e||"").length;r.length&&a>0;)o=r.pop(),g("Cache is full, removing item with key '"+t+"'"),w(o.key),a-=o.size;try{m(t,e)}catch(e){return g("Could not add item with key '"+t+"', perhaps it's too big?",e),!1}}return n?m(d(t),(f()+n).toString(10)):h(d(t)),!0},get:function(t){if(!s())return null;if(v(t))return null;var e=p(t);if(!e||!l())return e;try{return JSON.parse(e)}catch(t){return e}},remove:function(t){s()&&w(t)},supported:function(){return s()},flush:function(){s()&&y((function(t){w(t)}))},flushExpired:function(){s()&&y((function(t){v(t)}))},setBucket:function(t){a=t},resetBucket:function(){a=""},getExpiryMilliseconds:function(){return r},setExpiryMilliseconds:function(t){i=b(r=t)},enableWarnings:function(t){c=t}}})?n.apply(e,[]):n)||(t.exports=o)}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}!function(){"use strict";class t{constructor(t){this.element=t.element,this.started=!1,this.name=t.name,this.options=t.options||{},this.children=t.children||{},t.querySelector&&Object.keys(t.querySelector).forEach((e=>{this.children[e]=this.element.querySelector(t.querySelector[e])})),t.querySelectorAll&&Object.keys(t.querySelectorAll).forEach((e=>{this.children[e]=this.element.querySelectorAll(t.querySelectorAll[e])}))}destroy(){this.element.parentNode.removeChild(this.element)}getOffsetTop(t,e){return e===t?0:t.offsetTop+this.getOffsetTop(t.parentElement,e)}static isChild(t,e){if(t){let n=t.parentNode;for(;n;){if(n===e)return!0;n=n.parentNode}}return!1}}var e=function(t,e){let n=!1;const o=[],r=function(){o.length&&!n&&(n=!0,o.shift().call(),setTimeout((()=>{n=!1,r()}),e))};return function(){o.push(t.bind(this,...arguments)),r()}};function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}n(6490),n(737);const{nbc:{brand:s="",callLetters:u="",env:l="",identity:d={},dataLayer:{domainName:f="",division:p=""},fullDomain:m=""},wp:{apiFetch:h}={}}=window,y="telemundo"===s?"cuenta":"account",w=t=>{switch(t){case"rsn":return"nbc_sports";case"telemundo":return"telemundo";default:return"nbc"}},v=t=>{switch(t.toUpperCase()){case"NSBO":return"NBCSB";case"NSBA":return"NBCSBA";case"NSPH":return"NBCSP";case"NSCH":return"NBCSC";default:return t}},g=()=>{const t=["preprod","production"].includes(l)?"id":"stage.id-envs";d.initialize((()=>{switch(p){case"rsn":return"rsnsweb";case"telemundo":return"telemundolocalweb";default:return"localstationsweb"}})(),{checkoutEnabled:!1,configLocationHost:`https://${t}.nbcuni.com/websdk/config`,debug:!0,env:["preprod","production"].includes(l)?"production":"stage",language:"telemundo"===s?"es":"en",native:!1,useBaseSdkLocation:!1,version:"2",crossDomain:!0,identityConfigOverrides:{brand:{product:m},crossDomain:{oAuthBrandLogo:`/websdk/assets/local/logos/${w(p)}/${v(u).toUpperCase()}_logo_${"maxTouchPoints"in navigator&&0<navigator.maxTouchPoints?window.matchMedia("(max-width: 767px)").matches?"mobile":"tablet":"desktop"}.svg`,redirectUrl:`https://${f}/${y}/`,clientId:(()=>{switch(p){case"rsn":return"rsn_web";case"telemundo":return"local_telemundo_web";default:return"local_nbc_web"}})()}}})},b=t=>{d.on("authenticationState",(e=>{t(e)}))},{nbc:{dataLayer:{contextData:k,pageName:S}}}=window,_=["prop1","prop2","prop3","prop4","prop8","prop9","prop10","prop20","prop21","prop22","prop23","prop48","prop52","prop53","prop54","prop55","eVar123","contextData.actionmodule","contextData.actionname","contextData.identityauth"];var E=(t,e,n)=>{if(console.log("unifiedTrackClick triggered: ",t,e),void 0===window.s)return;const{linkTrackVars:o,linkTrackEvents:r}=window.s;let i="unknown";b((t=>{["unauthenticated","authenticated"].includes(t)&&(i=t,k.identityauth=i)})),window.s.linkTrackVars=_.join(","),window.s.linkTrackEvents="";const a={prop21:n,prop52:S,prop53:t,prop54:`${S} | ${t}`,prop55:e,eVar123:i,contextData:{actionmodule:e,actionname:t,identityauth:i}};window.s.tl(void 0,"o",e,a),window.s.linkTrackVars=o,window.s.linkTrackEvents=r};var x,O=window.nbc,C=O.identityBrand,T=void 0===C?"default":C,L=O.identity,N=void 0===L?{}:L,j={name:"unifiedNav",class:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}(l,t);var e,n,i,s,u=(i=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(i);if(s){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=u.call(this,t)).setTriggers(),e}return e=l,(n=[{key:"setTriggers",value:function(){var t=this.children,e=t.login,n=t.logout,o=t.dashboard,r=t.email,i=this.element,a=document.body;b((function(t){"unknown"!==t&&document.querySelector(".identity-profile").classList.remove("identity-profile__loading"),"authenticated"===t?a.classList.add("identity-authenticated"):a.classList.remove("identity-authenticated"),E("identity state change","identity state change")})),i&&i.classList.contains("identity-profile")&&(null==i||i.addEventListener("click",(function(){(t=>{if(window.matchMedia("(max-width: 768px)").matches){const e=t.querySelector(".identity-profile__menu-container"),n="identity-profile__menu-container--show";e.classList.contains(n)?e.classList.remove(n):e.classList.add(n)}})(i)})));var c=function(t,e){var n="identity-profile-flyout"===t.target.parentElement.parentElement.className?"hamburger":"top nav";"top nav"===n&&"dashboard click"===e?E("dashboard","identity"):E(n,e)},s=function(t,e){t.addEventListener("click",(function(){"manage profile"===e?(N.openManageProfile(T),E(e,"dashboard click")):E(e,"identity"),"email preferences"===e&&N.openEmailPreferences(T)}))};e&&e.addEventListener("click",(function(t){return c(t,"sign in click"),console.log("idm: attached"),t.preventDefault(),((t=null)=>{const e=t?{saveBookmark:t}:{};d.launch({referringPage:"nbc-web-sdk-sample",registrationReferrer:"None",defaultPage:"createProfile",redirectUrl:`https://${f}/${y}/`,brandData:btoa(JSON.stringify(e))})})(),!1})),n&&(s(n,"sign out"),n.addEventListener("click",(function(t){return t.preventDefault(),d.unauthenticate(),!1}))),o&&o.addEventListener("click",(function(t){c(t,"dashboard click")})),r&&s(r,"email preferences");var u=document.querySelector(".unified--manage-profile--link");u&&!u.dataset.trackingAttached&&(s(u,"manage profile"),u.dataset.trackingAttached="true")}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),l}(t),querySelector:{login:".identity-profile__signin",logout:".identity-profile__signout",dashboard:".identity-profile__menu-item--dashboard",email:".identity-profile__menu-item--email"}},A=new class{constructor(t){window[t]=window[t]?window[t]:{components:{}},window.jsComponentFrameworkLimiter=window.jsComponentFrameworkLimiter?window.jsComponentFrameworkLimiter:e,this.manifest=window[t],this.limiter=window.jsComponentFrameworkLimiter}initComponents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;(Array.isArray(t)?t:[t]).forEach(this.limiter((t=>this.initComponent(t,e)),500))}initComponent(e,n){const o=e.name,r=e.class;if(r.prototype instanceof t){const t=Object.keys(this.manifest.components).includes(o),i=n.querySelectorAll("[data-component='".concat(o,"']"));if(!i.length)return void console.info('No elements found for data-component="'.concat(o,'"'));t||(this.manifest.components[o]={config:e,instances:[]}),Array.prototype.forEach.call(i,(t=>{const n=this.manifest.components[o].instances.some((e=>t.isSameNode(e.element)));if(n)return;const i=e;i.element=t;const a=new r(i);this.manifest.components[o].instances.push({instance:a,element:t})}))}}reinitComponent(t,e){const n=this.manifest.components[t].config;n&&this.initComponents([n],e)}static callComponentMethod(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.manifest[t]&&this.manifest[t].instances&&this.manifest[t].instances.forEach((t=>{"function"==typeof t[e]&&t[e].call(t,...n)}))}}("nbc-unified-components");x=function(){var t=window.nbc.identity;g(),t.on("status",(function(t){"initialized"===t&&A.initComponents([j])}))},"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",x):x()}()}();
//# sourceMappingURL=unifiedIdentity.5c546bc676f81d703d21.bundle.min.js.map